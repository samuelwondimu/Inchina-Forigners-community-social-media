{"version":3,"file":"index.js","sources":["../src/useDetectClickOutside.tsx"],"sourcesContent":["import { useCallback, useEffect, useRef } from 'react';\n\ninterface Props {\n  onTriggered: () => void;\n  disableClick?: boolean;\n  disableKeys?: boolean;\n  allowAnyKey?: boolean;\n  triggerKeys?: string[];\n}\n\n/**\n * Hook used to detect clicks outside a component (or an escape key press). onTriggered function is triggered on `click` or escape `keyup` event.\n *\n */\nexport function useDetectClickOutside({\n  onTriggered,\n  disableClick,\n  disableKeys,\n  allowAnyKey,\n  triggerKeys,\n}: Props) {\n  const ref = useRef(null);\n\n  const keyListener = useCallback((e: KeyboardEvent) => {\n    if (allowAnyKey) {\n      onTriggered();\n    } else if (triggerKeys) {\n      if (triggerKeys.includes(e.key)) {\n        onTriggered();\n      }\n    } else {\n      if (e.key === 'Escape') {\n        onTriggered();\n      }\n    }\n  }, []);\n\n  const clickListener = useCallback(\n    (e: MouseEvent) => {\n      if (ref && ref.current) {\n        if (!(ref.current! as any).contains(e.target)) {\n          onTriggered?.();\n        }\n      }\n    },\n    [ref.current]\n  );\n\n  useEffect(() => {\n    !disableClick && document.addEventListener('click', clickListener);\n    !disableKeys && document.addEventListener('keyup', keyListener);\n    return () => {\n      !disableClick && document.removeEventListener('click', clickListener);\n      !disableKeys && document.removeEventListener('keyup', keyListener);\n    };\n  }, []);\n\n  return ref;\n}\n"],"names":["useRef","useCallback","useEffect"],"mappings":";;;;AAUA;;;;SAIgB,qBAAqB,CAAC,EAM9B;QALN,WAAW,iBAAA,EACX,YAAY,kBAAA,EACZ,WAAW,iBAAA,EACX,WAAW,iBAAA,EACX,WAAW,iBAAA;IAEX,IAAM,GAAG,GAAGA,YAAM,CAAC,IAAI,CAAC,CAAC;IAEzB,IAAM,WAAW,GAAGC,iBAAW,CAAC,UAAC,CAAgB;QAC/C,IAAI,WAAW,EAAE;YACf,WAAW,EAAE,CAAC;SACf;aAAM,IAAI,WAAW,EAAE;YACtB,IAAI,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;gBAC/B,WAAW,EAAE,CAAC;aACf;SACF;aAAM;YACL,IAAI,CAAC,CAAC,GAAG,KAAK,QAAQ,EAAE;gBACtB,WAAW,EAAE,CAAC;aACf;SACF;KACF,EAAE,EAAE,CAAC,CAAC;IAEP,IAAM,aAAa,GAAGA,iBAAW,CAC/B,UAAC,CAAa;QACZ,IAAI,GAAG,IAAI,GAAG,CAAC,OAAO,EAAE;YACtB,IAAI,CAAE,GAAG,CAAC,OAAgB,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE;gBAC7C,WAAW,aAAX,WAAW,uBAAX,WAAW,GAAK;aACjB;SACF;KACF,EACD,CAAC,GAAG,CAAC,OAAO,CAAC,CACd,CAAC;IAEFC,eAAS,CAAC;QACR,CAAC,YAAY,IAAI,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;QACnE,CAAC,WAAW,IAAI,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;QAChE,OAAO;YACL,CAAC,YAAY,IAAI,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;YACtE,CAAC,WAAW,IAAI,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;SACpE,CAAC;KACH,EAAE,EAAE,CAAC,CAAC;IAEP,OAAO,GAAG,CAAC;AACb;;;;"}